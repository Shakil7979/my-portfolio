!function(){function a(a,i){i=i||{bubbles:!1,cancelable:!1,detail:void 0};var t=document.createEvent("CustomEvent");return t.initCustomEvent(a,i.bubbles,i.cancelable,i.detail),t}function i(){for(var a,t=arguments[0],e=arguments.length,r=1;e>r;r++)for(a in arguments[r])"object"==typeof arguments[r][a]&&null!=arguments[r][a]?(t[a]=t[a]||{},i(t[a],arguments[r][a])):t[a]=arguments[r][a];return t}function t(a){return"function"==typeof a}function e(i){var e,r,n,o,s=i.element;i.image&&(o=i.image,i.image=new Image,i.image.src=o),e=document.createElement("canvas"),e.width=s.offsetWidth,e.height=s.offsetHeight,e.className="particles",r=e.getContext("2d"),i.part=[],i.canvas={},i.canvas.width=e.width,i.canvas.height=e.height,i.canvas.ctx=r,i.canvas.object=e,"after"==i.layout?s.insertBefore(e,s.children[0]):s.appendChild(e);for(prop in i)this[prop]=i[prop];for(var d=0;d<i.amount;d++)n=Math.random(),this.add({position:{x:i.position.random?parseInt(Math.random()*i.canvas.width):i.position.x,y:i.position.random?parseInt(Math.random()*i.canvas.height):i.position.y},radius:{radius:i.radius.random?Math.random()*(i.radius.radius-i.radius.min)+i.radius.min:i.radius.radius},duration:{duration:i.duration.random?parseInt(Math.random()*(i.duration.duration-i.duration.min))+i.duration.min:i.duration.duration},speed:{speed:i.speed.random?Math.random()*(i.speed.speed-i.speed.min)+i.speed.min:i.speed.speed},opacity:{opacity:i.opacity.random?Math.random()*(i.opacity.opacity-i.opacity.min)+i.opacity.min:i.opacity.opacity},color:{color:i.color.random?{r:parseInt(n*(i.color.color.r-i.color.min.r)+i.color.min.r),g:parseInt(n*(i.color.color.g-i.color.min.g)+i.color.min.g),b:parseInt(n*(i.color.color.b-i.color.min.b)+i.color.min.b)}:i.color.color}});t(i.create)&&s.addEventListener("create.particles",i.create),s.dispatchEvent(new a("create.particles")),this.step()}$&&($.fn.particles=function(a){var i={init:function(a){return this.each(function(){this.particlesData=new particles(this,a),$(this).trigger("create.particles")})},add:function(a){return this.each(function(){this.particlesData.add(a)})},stop:function(){return this.each(function(){this.particlesData.stop(),$(this).trigger({type:"stateChange.particles",detail:{state:this.particlesData.state}})})},step:function(){return this.each(function(){this.particlesData.step()})},destroy:function(){return this.each(function(){this.particlesData.destroy()})}};return i[a]?i[a].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof a&&a?void $.error("Method "+a+" does not exist on jQuery.canvas.particles.js"):i.init.apply(this,arguments)}),a.prototype=window.Event.prototype;var r=2*Math.PI,n=1e3/60;this.particles=function(a,t){var n={amount:10,state:"playing",end:"change",dir:{x:1,y:1,xrand:!0,yrand:!0,rand:!0,xfunction:function(a,i,t,e,r){return i+=a*r},yfunction:function(a,i,t,e,n,o){return e+=Math.sin(r*(i/o))*t*n}},image:!1,radius:{radius:5,random:!1,min:3},duration:{duration:1e4,random:!1,min:1e3,firststep:-2e3},speed:{speed:1,random:!1,min:.2},opacity:{opacity:1,random:!1,min:0,animation:!0,decay:!0},position:{x:0,y:0,random:!1},color:{color:{r:255,g:255,b:255},random:!1,min:{r:0,g:0,b:0}},layout:"before",bound:"back",create:!1,addParticle:!1,stateChange:!1,removeParticle:!1},o=i({},n,t||{});o.element=a,e.call(this,o)};var o=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(a){return window.setTimeout(a,n)}}(),s=function(){return window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.oCancelAnimationFrame||window.msCancelAnimationFrame||window.webkitCancelRequestAnimationFrame||window.mozCancelRequestAnimationFrame||window.oCancelRequestAnimationFrame||window.msCancelRequestAnimationFrame||function(a){clearTimeout(a)}}();particles.prototype.add=function(e){var o,s,d,c,p,u=this,m=u.element;o={color:i({},u.color,e.color||{}),duration:i({},u.duration,e.duration||{}),end:e.end?e.end:u.end,image:e.image?e.image:u.image,opacity:i({},u.opacity,e.opacity||{}),radius:i({},u.radius,e.radius||{}),speed:i({},u.speed,e.speed||{}),position:i({},u.position,e.position||{}),dir:i({},u.dir,e.dir||{}),bound:e.bound?e.bound:u.bound,alpha:0},s=function(){o.dir.x=o.dir.xrand?0==parseInt(2*Math.random())?Math.random()+.1:-1*Math.random()-.1:o.dir.x,o.dir.y=o.dir.yrand?0==parseInt(2*Math.random())?Math.random()+.1:-1*Math.random()-.1:o.dir.y},o.image&&!o.image.src&&(d=o.image,o.image=new Image,o.image.src=d),o.position=e.position&&e.position.random?{x:parseInt(Math.random()*u.canvas.width),y:parseInt(Math.random()*u.canvas.height),random:!0}:o.position,o.duration.duration=parseInt(o.duration.duration/n),o.duration.firststep=parseInt(o.duration.firststep/n),o.duration.min=parseInt(o.duration.min/n),o.step=o.duration.firststep,s(),c={half:o.duration.duration/2,min:parseInt(u.duration.min/n),duration:parseInt(u.duration.duration/n),radius:u.radius.radius-u.radius.min,speed:u.speed.speed-u.speed.min,opacity:u.opacity.opacity-u.opacity.min},c.max=c.duration-c.min,o.update=function(){o.step>=o.duration.duration?(o.step=o.duration.firststep,"remove"==o.end?o.remove=!0:"change"==o.end&&(s(),p=Math.random(),o.duration.duration=o.duration.random?parseInt(Math.random()*c.max)+c.min:o.duration.duration,o.radius.radius=o.radius.random?Math.random()*c.radius+u.radius.min:o.radius.radius,o.speed.speed=o.speed.random?Math.random()*c.speed+u.speed.min:o.speed.speed,o.opacity.opacity=o.opacity.random?Math.random()*c.opacity+u.opacity.min:o.opacity.opacity,o.color.color=o.color.random?{r:parseInt(p*(u.color.color.r-u.color.min.r)+u.color.min.r),g:parseInt(p*(u.color.color.g-u.color.min.g)+u.color.min.g),b:parseInt(p*(u.color.color.b-u.color.min.b)+u.color.min.b)}:o.color.color,c.half=o.duration.duration/2)):o.dir.rand&&o.step>0&&o.step%60==0&&1==Math.floor(2*Math.random())&&s(),o.alpha=o.opacity.animation?o.opacity.decay?o.step<c.half?o.step/c.half*o.opacity.opacity:(o.duration.duration-o.step)/c.half*o.opacity.opacity:o.alpha<o.opacity.opacity-.1?o.step/o.duration.duration*o.opacity.opacity:o.opacity.opacity:o.opacity.opacity,o.alpha=o.alpha<0?0:o.alpha,o.position.x=o.dir.xfunction(o.dir.x,o.position.x,o.dir.y,o.position.y,o.speed.speed,u.canvas.width,u.canvas.height,o.step),o.position.y=o.dir.yfunction(o.dir.x,o.position.x,o.dir.y,o.position.y,o.speed.speed,u.canvas.width,u.canvas.height,o.step),"back"==o.bound?(o.position.x=o.position.x>u.canvas.width+o.radius.radius+2?-o.radius.radius:o.position.x<-(o.radius.radius+2)?u.canvas.width+o.radius.radius:o.position.x,o.position.y=o.image?o.position.y>u.canvas.height+o.radius.radius*o.image.height/o.image.width+2?-o.radius.radius*o.image.height/o.image.width:o.position.y<-(o.radius.radius*o.image.height/o.image.width+2)?u.canvas.height+o.radius.radius*o.image.height/o.image.width:o.position.y:o.position.y>u.canvas.height+o.radius.radius+2?-o.radius.radius:o.position.y<-(o.radius.radius+2)?u.canvas.height+o.radius.radius:o.position.y):"bounce"==o.bound&&(o.position.x+o.radius.radius>=u.canvas.width?(o.position.x+=-o.speed.speed,o.dir.x=-1):o.position.x<=o.radius.radius&&(o.position.x+=o.speed.speed,o.dir.x=1),o.image?o.position.y+o.radius.radius*o.image.height/o.image.width>=u.canvas.height?(o.position.y+=-o.speed.speed,o.dir.y=-1):o.position.y<=o.radius.radius*o.image.height/o.image.width&&(o.position.y+=o.speed.speed,o.dir.y=1):o.position.y+o.radius.radius>=u.canvas.height?(o.position.y+=-o.speed.speed,o.dir.y=-1):o.position.y<=o.radius.radius&&(o.position.y+=o.speed.speed,o.dir.y=1)),o.image?(u.canvas.ctx.save(),u.canvas.ctx.translate(o.position.x,o.position.y),u.canvas.ctx.globalAlpha=o.alpha,u.canvas.ctx.drawImage(o.image,-o.radius.radius,-o.radius.radius*o.image.height/o.image.width,2*o.radius.radius,2*o.radius.radius*o.image.height/o.image.width),u.canvas.ctx.restore()):(u.canvas.ctx.beginPath(),u.canvas.ctx.arc(o.position.x,o.position.y,o.radius.radius,0,r,!1),u.canvas.ctx.fillStyle="rgba("+o.color.color.r+","+o.color.color.g+","+o.color.color.b+","+o.alpha+")",u.canvas.ctx.fill()),o.step++},t(u.addParticle)&&m.addEventListener("addParticle.particles",u.addParticle),m.dispatchEvent(new a("addParticle.particles",{detail:{added:o}})),$.fn.particles&&$(m).trigger({type:"addParticle.particles",detail:{added:o}}),u.part.push(o)},particles.prototype.stop=function(){var i=this,e=i.element;"playing"==i.state?(i.state="stopped",s(i.requestid)):(i.state="playing",i.step()),t(i.stateChange)&&e.addEventListener("stateChange.particles",i.stateChange),e.dispatchEvent(new a("stateChange.particles",{detail:{state:i.state}}))},particles.prototype.step=function(){var i,e=this,r=e.element;if(e&&"playing"==e.state){i=[],e.canvas.ctx.clearRect(0,0,e.canvas.width,e.canvas.height);for(var n,s=e.part.length,d=0;s>d;d++)n=e.part[d],n.update(),n.remove?(t(e.removeParticle)&&r.addEventListener("removeParticle.particles",e.removeParticle),r.dispatchEvent(new a("removeParticle.particles",{detail:{removed:n}})),$.fn.particles&&$(r).trigger({type:"removeParticle.particles",detail:{removed:n}})):i.push(n);e&&(e.part=i,e.requestid=o(function(){e.step()}))}},particles.prototype.destroy=function(){var a=this,i=a.element;a.stop(),t(a.removeParticle)&&i.removeEventListener("removeParticle.particles",a.removeParticle),t(a.stateChange)&&i.removeEventListener("stateChange.particles",a.stateChange),t(a.addParticle)&&i.removeEventListener("addParticle.particles",a.addParticle),t(a.create)&&i.removeEventListener("create.particles",a.create),i.removeChild(a.canvas.object),delete a}}();
